{"ast":null,"code":"const axios = require('axios');\n\nconst loadResults = items => {\n  const firstName = items.firstName,\n        destCity = items.destCity,\n        originCity = items.originCity,\n        depDate = items.depDate,\n        returnDate = items.returnDate;\n  let originCityId;\n  let destCityId;\n  let originCityName;\n  let destCityName;\n\n  const getOriginCityId = () => {\n    axios({\n      method: 'GET',\n      url: 'https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/UK/GBP/en-GB/',\n      headers: {\n        'content-type': 'application/octet-stream',\n        'x-rapidapi-host': 'skyscanner-skyscanner-flight-search-v1.p.rapidapi.com',\n        'x-rapidapi-key': '2f3a0e5559mshf0b9a7a94324ff7p1bf4dajsna06e1715474c'\n      },\n      params: {\n        query: originCity\n      }\n    }).then(response => {\n      originCityId = response.data.Places[0].PlaceId;\n      originCityName = response.data.Places[0].PlaceName;\n      getDestCityId();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const getDestCityId = () => {\n    axios({\n      method: 'GET',\n      url: 'https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/UK/GBP/en-GB/',\n      headers: {\n        'content-type': 'application/octet-stream',\n        'x-rapidapi-host': 'skyscanner-skyscanner-flight-search-v1.p.rapidapi.com',\n        'x-rapidapi-key': '2f3a0e5559mshf0b9a7a94324ff7p1bf4dajsna06e1715474c'\n      },\n      params: {\n        query: destCity\n      }\n    }).then(response => {\n      destCityId = response.data.Places[0].PlaceId;\n      destCityName = response.data.Places[0].PlaceName;\n      searchFlights();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const searchFlights = () => {\n    console.log(\"\\n      Origin City Id: \".concat(originCityId, \"\\n      Origin City Name: \").concat(originCityName, \"\\n      Dest City Id: \").concat(destCityId, \"\\n      Dest City Name: \").concat(destCityName, \"\\n      Inbound: \").concat(depDate, \"\\n      Outbound: \").concat(returnDate, \"\\n    \")); // Getting 500 error from the below request, inserting dummy data instead of response for now\n    // axios({\n    //   method: 'POST',\n    //   url:\n    //     'https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/pricing/v1.0',\n    //   headers: {\n    //     'content-type': 'application/x-www-form-urlencoded',\n    //     'x-rapidapi-host':\n    //       'skyscanner-skyscanner-flight-search-v1.p.rapidapi.com',\n    //     'x-rapidapi-key': '2f3a0e5559mshf0b9a7a94324ff7p1bf4dajsna06e1715474c'\n    //   },\n    //   data: {\n    //     inboundDate: '2019-12-15',\n    //     cabinClass: 'business',\n    //     children: '0',\n    //     infants: '0',\n    //     country: 'US',\n    //     currency: 'USD',\n    //     locale: 'en-US',\n    //     originPlace: 'EWR-sky',\n    //     destinationPlace: 'HOUA-sky',\n    //     outboundDate: '2019-12-12',\n    //     adults: '1'\n    //   }\n    // })\n    //   .then(response => {\n    //     console.log(response);\n    //   })\n    //   .catch(error => {\n    //     console.log(error);\n    //   });\n  };\n\n  getOriginCityId();\n  if (originCityId) return originCityId;\n};\n\nexport default loadResults;","map":{"version":3,"sources":["/Users/rjshoemaker/Desktop/code/projects/myconcierge/client/src/loadResults.js"],"names":["axios","require","loadResults","items","firstName","destCity","originCity","depDate","returnDate","originCityId","destCityId","originCityName","destCityName","getOriginCityId","method","url","headers","params","query","then","response","data","Places","PlaceId","PlaceName","getDestCityId","catch","error","console","log","searchFlights"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,MAAMC,WAAW,GAAGC,KAAK,IAAI;AAAA,QACnBC,SADmB,GACsCD,KADtC,CACnBC,SADmB;AAAA,QACRC,QADQ,GACsCF,KADtC,CACRE,QADQ;AAAA,QACEC,UADF,GACsCH,KADtC,CACEG,UADF;AAAA,QACcC,OADd,GACsCJ,KADtC,CACcI,OADd;AAAA,QACuBC,UADvB,GACsCL,KADtC,CACuBK,UADvB;AAG3B,MAAIC,YAAJ;AACA,MAAIC,UAAJ;AACA,MAAIC,cAAJ;AACA,MAAIC,YAAJ;;AAEA,QAAMC,eAAe,GAAG,MAAM;AAC5Bb,IAAAA,KAAK,CAAC;AACJc,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EACD,0GAHE;AAIJC,MAAAA,OAAO,EAAE;AACP,wBAAgB,0BADT;AAEP,2BACE,uDAHK;AAIP,0BAAkB;AAJX,OAJL;AAUJC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAEZ;AADD;AAVJ,KAAD,CAAL,CAcGa,IAdH,CAcQC,QAAQ,IAAI;AAChBX,MAAAA,YAAY,GAAGW,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB,CAArB,EAAwBC,OAAvC;AACAZ,MAAAA,cAAc,GAAGS,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB,CAArB,EAAwBE,SAAzC;AACAC,MAAAA,aAAa;AACd,KAlBH,EAmBGC,KAnBH,CAmBSC,KAAK,IAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KArBH;AAsBD,GAvBD;;AAyBA,QAAMF,aAAa,GAAG,MAAM;AAC1BzB,IAAAA,KAAK,CAAC;AACJc,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EACD,0GAHE;AAIJC,MAAAA,OAAO,EAAE;AACP,wBAAgB,0BADT;AAEP,2BACE,uDAHK;AAIP,0BAAkB;AAJX,OAJL;AAUJC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAEb;AADD;AAVJ,KAAD,CAAL,CAcGc,IAdH,CAcQC,QAAQ,IAAI;AAChBV,MAAAA,UAAU,GAAGU,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB,CAArB,EAAwBC,OAArC;AACAX,MAAAA,YAAY,GAAGQ,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB,CAArB,EAAwBE,SAAvC;AACAM,MAAAA,aAAa;AACd,KAlBH,EAmBGJ,KAnBH,CAmBSC,KAAK,IAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KArBH;AAsBD,GAvBD;;AAyBA,QAAMG,aAAa,GAAG,MAAM;AAC1BF,IAAAA,OAAO,CAACC,GAAR,mCACoBpB,YADpB,uCAEsBE,cAFtB,mCAGkBD,UAHlB,qCAIoBE,YAJpB,8BAKaL,OALb,+BAMcC,UANd,aAD0B,CAU1B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GA1CD;;AA4CAK,EAAAA,eAAe;AAEf,MAAIJ,YAAJ,EAAkB,OAAOA,YAAP;AACnB,CAzGD;;AA2GA,eAAeP,WAAf","sourcesContent":["const axios = require('axios');\n\nconst loadResults = items => {\n  const { firstName, destCity, originCity, depDate, returnDate } = items;\n\n  let originCityId;\n  let destCityId;\n  let originCityName;\n  let destCityName;\n\n  const getOriginCityId = () => {\n    axios({\n      method: 'GET',\n      url:\n        'https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/UK/GBP/en-GB/',\n      headers: {\n        'content-type': 'application/octet-stream',\n        'x-rapidapi-host':\n          'skyscanner-skyscanner-flight-search-v1.p.rapidapi.com',\n        'x-rapidapi-key': '2f3a0e5559mshf0b9a7a94324ff7p1bf4dajsna06e1715474c'\n      },\n      params: {\n        query: originCity\n      }\n    })\n      .then(response => {\n        originCityId = response.data.Places[0].PlaceId;\n        originCityName = response.data.Places[0].PlaceName;\n        getDestCityId();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  const getDestCityId = () => {\n    axios({\n      method: 'GET',\n      url:\n        'https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/UK/GBP/en-GB/',\n      headers: {\n        'content-type': 'application/octet-stream',\n        'x-rapidapi-host':\n          'skyscanner-skyscanner-flight-search-v1.p.rapidapi.com',\n        'x-rapidapi-key': '2f3a0e5559mshf0b9a7a94324ff7p1bf4dajsna06e1715474c'\n      },\n      params: {\n        query: destCity\n      }\n    })\n      .then(response => {\n        destCityId = response.data.Places[0].PlaceId;\n        destCityName = response.data.Places[0].PlaceName;\n        searchFlights();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  const searchFlights = () => {\n    console.log(`\n      Origin City Id: ${originCityId}\n      Origin City Name: ${originCityName}\n      Dest City Id: ${destCityId}\n      Dest City Name: ${destCityName}\n      Inbound: ${depDate}\n      Outbound: ${returnDate}\n    `);\n\n    // Getting 500 error from the below request, inserting dummy data instead of response for now\n\n    // axios({\n    //   method: 'POST',\n    //   url:\n    //     'https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/pricing/v1.0',\n    //   headers: {\n    //     'content-type': 'application/x-www-form-urlencoded',\n    //     'x-rapidapi-host':\n    //       'skyscanner-skyscanner-flight-search-v1.p.rapidapi.com',\n    //     'x-rapidapi-key': '2f3a0e5559mshf0b9a7a94324ff7p1bf4dajsna06e1715474c'\n    //   },\n    //   data: {\n    //     inboundDate: '2019-12-15',\n    //     cabinClass: 'business',\n    //     children: '0',\n    //     infants: '0',\n    //     country: 'US',\n    //     currency: 'USD',\n    //     locale: 'en-US',\n    //     originPlace: 'EWR-sky',\n    //     destinationPlace: 'HOUA-sky',\n    //     outboundDate: '2019-12-12',\n    //     adults: '1'\n    //   }\n    // })\n    //   .then(response => {\n    //     console.log(response);\n    //   })\n    //   .catch(error => {\n    //     console.log(error);\n    //   });\n  };\n\n  getOriginCityId();\n\n  if (originCityId) return originCityId;\n};\n\nexport default loadResults;\n"]},"metadata":{},"sourceType":"module"}